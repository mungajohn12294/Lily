<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lilian's Answers ðŸ’–</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
<style>
body{font-family:sans-serif;background:#0d0c1d;color:#fff;padding:20px;}
h1{text-align:center;color:#ff61a6;}
table{width:100%;border-collapse:collapse;margin-top:20px;}
th,td{border:1px solid #fff;padding:10px;text-align:left;}
th{background:#ff61a6;color:#000;}
tr:nth-child(even){background: rgba(255,255,255,0.1);}
.search{width:100%;max-width:400px;padding:10px;margin:10px auto;border-radius:10px;border:none;font-size:1rem;}
</style>
</head>
<body>
<h1>Lilian's Answers ðŸ’–</h1>
<input class="search" id="searchInput" placeholder="Search answers...">

<table>
<thead>
<tr>
<th>Question</th>
<th>Answer</th>
<th>Time</th>
</tr>
</thead>
<tbody id="answersBody"></tbody>
</table>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyB2mQNeygEwdWFCnHJnw9wlqHWKmXlfe38",
  authDomain: "taptap-377d9.firebaseapp.com",
  databaseURL: "https://taptap-377d9-default-rtdb.firebaseio.com",
  projectId: "taptap-377d9",
  storageBucket: "taptap-377d9.firebasestorage.app",
  messagingSenderId: "146364410143",
  appId: "1:146364410143:web:3ce902bdcaeb954091682a",
  measurementId: "G-LRJ2TK7CDH"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const tbody = document.getElementById('answersBody');
const searchInput = document.getElementById('searchInput');

let allAnswers = [];

db.collection('lilian_answers').orderBy('timestamp','asc').onSnapshot(snapshot=>{
  allAnswers=[];
  tbody.innerHTML='';
  snapshot.forEach(doc=>{
    const data = doc.data();
    allAnswers.push(data);
  });
  renderTable(allAnswers);
});

function renderTable(data){
  tbody.innerHTML='';
  data.forEach(d=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${d.question}</td><td>${d.answer}</td><td>${d.timestamp?.toDate().toLocaleString()||'-'}</td>`;
    tbody.appendChild(tr);
  });
}

searchInput.addEventListener('input',()=>{
  const term = searchInput.value.toLowerCase();
  const filtered = allAnswers.filter(a=>a.question.toLowerCase().includes(term)||a.answer.toLowerCase().includes(term));
  renderTable(filtered);
});
</script>
</body>
</html>
